{% extends "base.html" %}
{% load location_extra %}
{% load static %}


{% block title %}Dashboard | {{ SITE_NAME }}{% endblock %}

{% block extra_styles %}
<style>
a:hover {
    text-decoration: none;
}

.modal-header {
  background-color: #fff !important;
  padding-bottom: 2rem !important;
}

.modal-body {
  background-color: #f9fafb !important;
}

.modal-footer {
  padding: 1rem 1rem 1rem 1rem !important;
  background-color: #fff !important;
  text-align: center !important;
}
</style>


<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />

{% endblock extra_styles %}


{% block content %}


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header justify-content-end">
          <h3 class="text-primary">Sorry, This feature is not available yet.</h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-8 icon-close-circle"><circle cx="12" cy="12" r="10" class="primary"/><path class="secondary" d="M13.41 12l2.83 2.83a1 1 0 0 1-1.41 1.41L12 13.41l-2.83 2.83a1 1 0 1 1-1.41-1.41L10.59 12 7.76 9.17a1 1 0 0 1 1.41-1.41L12 10.59l2.83-2.83a1 1 0 0 1 1.41 1.41L13.41 12z"/></svg>
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Modal End -->

<!-- Body Start -->
<section class="section container">
      {% block component %}
        {% include "users/user/user_profile_nav.html" %}
      {% endblock component %}

      {% block mobile_nav %}
        {% include "users/user/user_profile_mobile_nav.html" %}
      {% endblock mobile_nav %}

        <div class="row mt-5">
            <div class="col-lg-2 col-md-4 ">
                <div class="card stripe-primary-top card-border shadow-2 mb-3">
                    <div class="card-body p-3 py-1 text-center border-bottom">
                        <h3 class="header">Gegoo Rewards</h3>

                        <canvas id="doughnut-chart" width="100%" height="100%"></canvas>

                        <a href="" class="fs-16 fw-6 text-primary">{{ data }} Points</a>
                    </div>
                </div>

                <div class="card stripe-primary-top card-border shadow-2 mb-3">
                    <div class="card-body p-3 py-1 text-center border-bottom">
                        <h3 class="header">Upload Receipt</h3>
                        <div class="py-2"></div>
                        <button type="button" class="btn btn-primary-alt btn-block py-2" data-toggle="modal" data-target="#exampleModal">
                            Upload
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-4 ml-2 icon-receipt"><path class="primary" d="M9 18.41l-2.3 2.3a1 1 0 0 1-1.4 0l-2-2A1 1 0 0 1 3 18V5c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13a1 1 0 0 1-.3.7l-2 2a1 1 0 0 1-1.4 0L15 18.42l-2.3 2.3a1 1 0 0 1-1.4 0L9 18.4z"/><path class="secondary" d="M7 7h10a1 1 0 0 1 0 2H7a1 1 0 1 1 0-2zm0 4h10a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2z"/></svg>
                        </button>
                    </div>
                </div>
            </div>

            <div class="col-lg-10 col-md-8 mb-4">
                <div class="mb-3">
                    <h3 class="section-header">Recommended Services</h3>
                </div>
                <div class="row">
                    {% for object in store_nearby %}
                    <div class="col-lg-3 col-md-6 col-sm-6 text-center border-radius-300 mb-4 px-m-na-3">
                        <div class="card">
                            <a class="" href="{{ object.get_consumer_absolute_url }}">
                                <img class="img-fluid border-radius-top-100" style="max-height: 200px;" src="{{ AwsBucketMediaURL }}{{ object.logo }}" alt="User Uploaded images">
                            </a>
                            <div class="card-body py-1 px-3">
                                <div class=" text-left mt-2">
                                    <a href="{{ object.get_consumer_absolute_url }}" class="fw-6 text-primary fs-18 mb-1">{{ object.business_name }}</a>
                                    <br>
                                        {% for i in object.rating_average_round %}
                                        <span class="fa fa-star star-yellow fs-16"></span>

                                        {% endfor %}
                                        {% for i in object.rating_average_round_inverted %}
                                        <span class="fa fa-star-o star-yellow fs-16"></span>
                                        {% endfor %}
                                    <br>
                                    <!-- <span class="fs-12 text-gray-700">{{ object.category.get_name_display }} <span class="text-purple-500 px-1">&#8226;</span> {{ object.subcategory.name }}</span> -->
                                        {% for object in object.rating_average.ratingsystem %}
                                            testimonial
                                        {% endfor %}
                                    <p class="fw-4 text-gray-800 fs-16 fw-4 pt-2">
                                        {{ object.slogan|truncatewords:8 }}
                                    </p>
                                    <div class="fs-14 mt-3 mb-2">

                                    </div>
                                    <!-- url 'portal:merchant_detail' object.state object.city object.offer.first.merchant.category object.offer.first.merchant.subcategory object.offer.first.merchant.business_name object.offer.first.merchant.ref_code -->
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
      	    </div>
      </div>
      <div class="py-5 hide"></div><div class="py-5 hide"></div>
</section>

{% endblock content %}

{% block jquery %}
$(document).ready(function() {

    var UserRewardData = parseInt("{{ data }}")
    console.log(UserRewardData)

    new Chart(document.getElementById("doughnut-chart"), {
        type: 'doughnut',
        data: {

          datasets: [
            {
              label: "Population (millions)",
              backgroundColor: ["#7505AB"],
              data: [UserRewardData, 100],
              weight: 0.5,
            }
          ]
        },
        options: {

          title: {
            display: false,
          }
        }
    });


});
{% endblock %}

{% block extrajs %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>

<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script>
  AOS.init({
    duration: 1300,
  });
</script>
{% endblock extrajs %}
